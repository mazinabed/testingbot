{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Stage = void 0;\n\nconst session_1 = require(\"../session\");\n\nconst context_1 = require(\"./context\");\n\nconst composer_1 = require(\"../composer\");\n\nclass Stage extends composer_1.Composer {\n  constructor() {\n    let scenes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    let options = arguments.length > 1 ? arguments[1] : undefined;\n    super();\n    this.options = { ...options\n    };\n    this.scenes = new Map();\n    scenes.forEach(scene => this.register(scene));\n  }\n\n  register() {\n    for (var _len = arguments.length, scenes = new Array(_len), _key = 0; _key < _len; _key++) {\n      scenes[_key] = arguments[_key];\n    }\n\n    scenes.forEach(scene => {\n      if ((scene === null || scene === void 0 ? void 0 : scene.id) == null || typeof scene.middleware !== 'function') {\n        throw new Error('telegraf: Unsupported scene');\n      }\n\n      this.scenes.set(scene.id, scene);\n    });\n    return this;\n  }\n\n  middleware() {\n    const handler = composer_1.Composer.compose([(ctx, next) => {\n      const scenes = this.scenes;\n      const scene = new context_1.default(ctx, scenes, this.options);\n      ctx.scene = scene;\n      return next();\n    }, super.middleware(), composer_1.Composer.lazy(ctx => {\n      var _a;\n\n      return (_a = ctx.scene.current) !== null && _a !== void 0 ? _a : composer_1.Composer.passThru();\n    })]);\n    return composer_1.Composer.optional(session_1.isSessionContext, handler);\n  }\n\n  static enter() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return ctx => ctx.scene.enter(...args);\n  }\n\n  static reenter() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return ctx => ctx.scene.reenter(...args);\n  }\n\n  static leave() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return ctx => ctx.scene.leave(...args);\n  }\n\n}\n\nexports.Stage = Stage;","map":{"version":3,"names":["Object","defineProperty","exports","value","Stage","session_1","require","context_1","composer_1","Composer","constructor","scenes","options","Map","forEach","scene","register","id","middleware","Error","set","handler","compose","ctx","next","default","lazy","_a","current","passThru","optional","isSessionContext","enter","args","reenter","leave"],"sources":["/Users/mazinabed/Desktop/testingbot/node_modules/telegraf/lib/scenes/stage.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Stage = void 0;\nconst session_1 = require(\"../session\");\nconst context_1 = require(\"./context\");\nconst composer_1 = require(\"../composer\");\nclass Stage extends composer_1.Composer {\n    constructor(scenes = [], options) {\n        super();\n        this.options = { ...options };\n        this.scenes = new Map();\n        scenes.forEach((scene) => this.register(scene));\n    }\n    register(...scenes) {\n        scenes.forEach((scene) => {\n            if ((scene === null || scene === void 0 ? void 0 : scene.id) == null || typeof scene.middleware !== 'function') {\n                throw new Error('telegraf: Unsupported scene');\n            }\n            this.scenes.set(scene.id, scene);\n        });\n        return this;\n    }\n    middleware() {\n        const handler = composer_1.Composer.compose([\n            (ctx, next) => {\n                const scenes = this.scenes;\n                const scene = new context_1.default(ctx, scenes, this.options);\n                ctx.scene = scene;\n                return next();\n            },\n            super.middleware(),\n            composer_1.Composer.lazy((ctx) => { var _a; return (_a = ctx.scene.current) !== null && _a !== void 0 ? _a : composer_1.Composer.passThru(); }),\n        ]);\n        return composer_1.Composer.optional(session_1.isSessionContext, handler);\n    }\n    static enter(...args) {\n        return (ctx) => ctx.scene.enter(...args);\n    }\n    static reenter(...args) {\n        return (ctx) => ctx.scene.reenter(...args);\n    }\n    static leave(...args) {\n        return (ctx) => ctx.scene.leave(...args);\n    }\n}\nexports.Stage = Stage;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}
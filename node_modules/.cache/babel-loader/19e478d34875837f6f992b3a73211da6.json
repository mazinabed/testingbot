{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WizardScene = void 0;\n\nconst base_1 = require(\"../base\");\n\nconst context_1 = require(\"./context\");\n\nconst composer_1 = require(\"../../composer\");\n\nclass WizardScene extends base_1.default {\n  constructor(id, options) {\n    let opts;\n    let s;\n\n    for (var _len = arguments.length, steps = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      steps[_key - 2] = arguments[_key];\n    }\n\n    if (typeof options === 'function' || 'middleware' in options) {\n      opts = undefined;\n      s = [options, ...steps];\n    } else {\n      opts = options;\n      s = steps;\n    }\n\n    super(id, opts);\n    this.steps = s;\n  }\n\n  middleware() {\n    return composer_1.default.compose([(ctx, next) => {\n      ctx.wizard = new context_1.default(ctx, this.steps);\n      return next();\n    }, super.middleware(), (ctx, next) => {\n      if (ctx.wizard.step === undefined) {\n        ctx.wizard.selectStep(0);\n        return ctx.scene.leave();\n      }\n\n      return composer_1.default.unwrap(ctx.wizard.step)(ctx, next);\n    }]);\n  }\n\n  enterMiddleware() {\n    return composer_1.default.compose([this.enterHandler, this.middleware()]);\n  }\n\n}\n\nexports.WizardScene = WizardScene;","map":{"version":3,"names":["Object","defineProperty","exports","value","WizardScene","base_1","require","context_1","composer_1","default","constructor","id","options","opts","s","steps","undefined","middleware","compose","ctx","next","wizard","step","selectStep","scene","leave","unwrap","enterMiddleware","enterHandler"],"sources":["/Users/mazinabed/Desktop/testingbot/node_modules/telegraf/lib/scenes/wizard/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WizardScene = void 0;\nconst base_1 = require(\"../base\");\nconst context_1 = require(\"./context\");\nconst composer_1 = require(\"../../composer\");\nclass WizardScene extends base_1.default {\n    constructor(id, options, ...steps) {\n        let opts;\n        let s;\n        if (typeof options === 'function' || 'middleware' in options) {\n            opts = undefined;\n            s = [options, ...steps];\n        }\n        else {\n            opts = options;\n            s = steps;\n        }\n        super(id, opts);\n        this.steps = s;\n    }\n    middleware() {\n        return composer_1.default.compose([\n            (ctx, next) => {\n                ctx.wizard = new context_1.default(ctx, this.steps);\n                return next();\n            },\n            super.middleware(),\n            (ctx, next) => {\n                if (ctx.wizard.step === undefined) {\n                    ctx.wizard.selectStep(0);\n                    return ctx.scene.leave();\n                }\n                return composer_1.default.unwrap(ctx.wizard.step)(ctx, next);\n            },\n        ]);\n    }\n    enterMiddleware() {\n        return composer_1.default.compose([this.enterHandler, this.middleware()]);\n    }\n}\nexports.WizardScene = WizardScene;\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,WAAR,GAAsB,KAAK,CAA3B;;AACA,MAAMC,MAAM,GAAGC,OAAO,CAAC,SAAD,CAAtB;;AACA,MAAMC,SAAS,GAAGD,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAME,UAAU,GAAGF,OAAO,CAAC,gBAAD,CAA1B;;AACA,MAAMF,WAAN,SAA0BC,MAAM,CAACI,OAAjC,CAAyC;EACrCC,WAAW,CAACC,EAAD,EAAKC,OAAL,EAAwB;IAC/B,IAAIC,IAAJ;IACA,IAAIC,CAAJ;;IAF+B,kCAAPC,KAAO;MAAPA,KAAO;IAAA;;IAG/B,IAAI,OAAOH,OAAP,KAAmB,UAAnB,IAAiC,gBAAgBA,OAArD,EAA8D;MAC1DC,IAAI,GAAGG,SAAP;MACAF,CAAC,GAAG,CAACF,OAAD,EAAU,GAAGG,KAAb,CAAJ;IACH,CAHD,MAIK;MACDF,IAAI,GAAGD,OAAP;MACAE,CAAC,GAAGC,KAAJ;IACH;;IACD,MAAMJ,EAAN,EAAUE,IAAV;IACA,KAAKE,KAAL,GAAaD,CAAb;EACH;;EACDG,UAAU,GAAG;IACT,OAAOT,UAAU,CAACC,OAAX,CAAmBS,OAAnB,CAA2B,CAC9B,CAACC,GAAD,EAAMC,IAAN,KAAe;MACXD,GAAG,CAACE,MAAJ,GAAa,IAAId,SAAS,CAACE,OAAd,CAAsBU,GAAtB,EAA2B,KAAKJ,KAAhC,CAAb;MACA,OAAOK,IAAI,EAAX;IACH,CAJ6B,EAK9B,MAAMH,UAAN,EAL8B,EAM9B,CAACE,GAAD,EAAMC,IAAN,KAAe;MACX,IAAID,GAAG,CAACE,MAAJ,CAAWC,IAAX,KAAoBN,SAAxB,EAAmC;QAC/BG,GAAG,CAACE,MAAJ,CAAWE,UAAX,CAAsB,CAAtB;QACA,OAAOJ,GAAG,CAACK,KAAJ,CAAUC,KAAV,EAAP;MACH;;MACD,OAAOjB,UAAU,CAACC,OAAX,CAAmBiB,MAAnB,CAA0BP,GAAG,CAACE,MAAJ,CAAWC,IAArC,EAA2CH,GAA3C,EAAgDC,IAAhD,CAAP;IACH,CAZ6B,CAA3B,CAAP;EAcH;;EACDO,eAAe,GAAG;IACd,OAAOnB,UAAU,CAACC,OAAX,CAAmBS,OAAnB,CAA2B,CAAC,KAAKU,YAAN,EAAoB,KAAKX,UAAL,EAApB,CAA3B,CAAP;EACH;;AAjCoC;;AAmCzCf,OAAO,CAACE,WAAR,GAAsBA,WAAtB"},"metadata":{},"sourceType":"script"}
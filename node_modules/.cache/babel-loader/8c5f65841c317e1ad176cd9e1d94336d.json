{"ast":null,"code":"\"use strict\";\n/** @format */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Router = void 0;\n\nconst composer_1 = require(\"./composer\");\n\nclass Router {\n  constructor(routeFn) {\n    let handlers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Map();\n    this.routeFn = routeFn;\n    this.handlers = handlers;\n    this.otherwiseHandler = composer_1.default.passThru();\n\n    if (typeof routeFn !== 'function') {\n      throw new Error('Missing routing function');\n    }\n  }\n\n  on(route) {\n    for (var _len = arguments.length, fns = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      fns[_key - 1] = arguments[_key];\n    }\n\n    if (fns.length === 0) {\n      throw new TypeError('At least one handler must be provided');\n    }\n\n    this.handlers.set(route, composer_1.default.compose(fns));\n    return this;\n  }\n\n  otherwise() {\n    for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      fns[_key2] = arguments[_key2];\n    }\n\n    if (fns.length === 0) {\n      throw new TypeError('At least one otherwise handler must be provided');\n    }\n\n    this.otherwiseHandler = composer_1.default.compose(fns);\n    return this;\n  }\n\n  middleware() {\n    return composer_1.default.lazy(ctx => {\n      var _a;\n\n      const result = this.routeFn(ctx);\n\n      if (result == null) {\n        return this.otherwiseHandler;\n      }\n\n      Object.assign(ctx, result.context);\n      Object.assign(ctx.state, result.state);\n      return (_a = this.handlers.get(result.route)) !== null && _a !== void 0 ? _a : this.otherwiseHandler;\n    });\n  }\n\n}\n\nexports.Router = Router;","map":{"version":3,"names":["Object","defineProperty","exports","value","Router","composer_1","require","constructor","routeFn","handlers","Map","otherwiseHandler","default","passThru","Error","on","route","fns","length","TypeError","set","compose","otherwise","middleware","lazy","ctx","_a","result","assign","context","state","get"],"sources":["/Users/mazinabed/Desktop/testingbot/node_modules/telegraf/lib/router.js"],"sourcesContent":["\"use strict\";\n/** @format */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Router = void 0;\nconst composer_1 = require(\"./composer\");\nclass Router {\n    constructor(routeFn, handlers = new Map()) {\n        this.routeFn = routeFn;\n        this.handlers = handlers;\n        this.otherwiseHandler = composer_1.default.passThru();\n        if (typeof routeFn !== 'function') {\n            throw new Error('Missing routing function');\n        }\n    }\n    on(route, ...fns) {\n        if (fns.length === 0) {\n            throw new TypeError('At least one handler must be provided');\n        }\n        this.handlers.set(route, composer_1.default.compose(fns));\n        return this;\n    }\n    otherwise(...fns) {\n        if (fns.length === 0) {\n            throw new TypeError('At least one otherwise handler must be provided');\n        }\n        this.otherwiseHandler = composer_1.default.compose(fns);\n        return this;\n    }\n    middleware() {\n        return composer_1.default.lazy((ctx) => {\n            var _a;\n            const result = this.routeFn(ctx);\n            if (result == null) {\n                return this.otherwiseHandler;\n            }\n            Object.assign(ctx, result.context);\n            Object.assign(ctx.state, result.state);\n            return (_a = this.handlers.get(result.route)) !== null && _a !== void 0 ? _a : this.otherwiseHandler;\n        });\n    }\n}\nexports.Router = Router;\n"],"mappings":"AAAA;AACA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,MAAR,GAAiB,KAAK,CAAtB;;AACA,MAAMC,UAAU,GAAGC,OAAO,CAAC,YAAD,CAA1B;;AACA,MAAMF,MAAN,CAAa;EACTG,WAAW,CAACC,OAAD,EAAgC;IAAA,IAAtBC,QAAsB,uEAAX,IAAIC,GAAJ,EAAW;IACvC,KAAKF,OAAL,GAAeA,OAAf;IACA,KAAKC,QAAL,GAAgBA,QAAhB;IACA,KAAKE,gBAAL,GAAwBN,UAAU,CAACO,OAAX,CAAmBC,QAAnB,EAAxB;;IACA,IAAI,OAAOL,OAAP,KAAmB,UAAvB,EAAmC;MAC/B,MAAM,IAAIM,KAAJ,CAAU,0BAAV,CAAN;IACH;EACJ;;EACDC,EAAE,CAACC,KAAD,EAAgB;IAAA,kCAALC,GAAK;MAALA,GAAK;IAAA;;IACd,IAAIA,GAAG,CAACC,MAAJ,KAAe,CAAnB,EAAsB;MAClB,MAAM,IAAIC,SAAJ,CAAc,uCAAd,CAAN;IACH;;IACD,KAAKV,QAAL,CAAcW,GAAd,CAAkBJ,KAAlB,EAAyBX,UAAU,CAACO,OAAX,CAAmBS,OAAnB,CAA2BJ,GAA3B,CAAzB;IACA,OAAO,IAAP;EACH;;EACDK,SAAS,GAAS;IAAA,mCAALL,GAAK;MAALA,GAAK;IAAA;;IACd,IAAIA,GAAG,CAACC,MAAJ,KAAe,CAAnB,EAAsB;MAClB,MAAM,IAAIC,SAAJ,CAAc,iDAAd,CAAN;IACH;;IACD,KAAKR,gBAAL,GAAwBN,UAAU,CAACO,OAAX,CAAmBS,OAAnB,CAA2BJ,GAA3B,CAAxB;IACA,OAAO,IAAP;EACH;;EACDM,UAAU,GAAG;IACT,OAAOlB,UAAU,CAACO,OAAX,CAAmBY,IAAnB,CAAyBC,GAAD,IAAS;MACpC,IAAIC,EAAJ;;MACA,MAAMC,MAAM,GAAG,KAAKnB,OAAL,CAAaiB,GAAb,CAAf;;MACA,IAAIE,MAAM,IAAI,IAAd,EAAoB;QAChB,OAAO,KAAKhB,gBAAZ;MACH;;MACDX,MAAM,CAAC4B,MAAP,CAAcH,GAAd,EAAmBE,MAAM,CAACE,OAA1B;MACA7B,MAAM,CAAC4B,MAAP,CAAcH,GAAG,CAACK,KAAlB,EAAyBH,MAAM,CAACG,KAAhC;MACA,OAAO,CAACJ,EAAE,GAAG,KAAKjB,QAAL,CAAcsB,GAAd,CAAkBJ,MAAM,CAACX,KAAzB,CAAN,MAA2C,IAA3C,IAAmDU,EAAE,KAAK,KAAK,CAA/D,GAAmEA,EAAnE,GAAwE,KAAKf,gBAApF;IACH,CATM,CAAP;EAUH;;AAlCQ;;AAoCbT,OAAO,CAACE,MAAR,GAAiBA,MAAjB"},"metadata":{},"sourceType":"script"}